{"version":3,"sources":["../babel/app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", (e) => {\n  loadTemplate();\n});\n\nlet loadTemplate = () => {\n  API.getCv((data) => {\n    let domParser = new DOMParser();\n    let template = domParser.parseFromString(data, \"text/html\");\n    let templateHtml = template.getElementById('main-wrap');\n    let templateStyles = template.getElementsByTagName('link');\n\n    //Add template HTML\n    $('#template').prepend(templateHtml);\n\n    //Add template styles\n    $('head').append(templateStyles);\n\n    if(window.isEditing) {\n      prepareToEditTemplate();\n    }\n\n    //Add timeout to remove twitches after loading template\n    setTimeout(() => {\n      $('#loader').removeClass('active');\n    }, 1000);\n  });\n}\n\nlet prepareToEditTemplate = () => {\n  let statusBarDom = $('#status-bar');\n  window.statusBar = new StatusBar(statusBarDom);\n\n  //Setup zones\n  let zones = $('[data-zone]');\n  for (let i = 0; i < zones.length; i++) {\n    new Zone(zones[i]);\n  }\n\n  //Setup blocks\n  let blocks = $('[data-block-id]');\n  for (let i = 0; i < blocks.length; i++) {\n    new Block(blocks[i]);\n  }\n}\n\nclass StatusBar {\n  constructor(element) {\n    this._element = element[0];\n\n    let closeButton = this._element.querySelector('.close');\n    closeButton.addEventListener('click', this._hide.bind(this), false);\n\n    this._isActive = false;\n    this._animationTimeoutId = null;\n  }\n\n  showMessage(message) {\n    this._element.classList.remove('is-error');\n\n    let messageEl = this._element.querySelector('.message');\n    messageEl.innerHTML = message;\n    // this._element.querySelector('.action')\n\n    this._show();\n  }\n\n  showError(error) {\n    this._element.classList.add('is-error');\n\n    let messageEl = this._element.querySelector('.message');\n    messageEl.innerHTML = error;\n\n    this._show();\n  }\n\n  _showBar() {\n    this._element.classList.add('is-active');\n    this._isActive = true;\n\n    clearTimeout(this._animationTimeoutId);\n    this._animationTimeoutId = setTimeout(this._hide.bind(this), 5000);\n  }\n\n  _show() {\n    if(this._isActive) {\n      new Promise((resolve, reject) => {\n        this._hide();\n        setTimeout(resolve, 250);\n      }).then(this._showBar.bind(this));\n    }\n    else {\n      this._showBar();\n    }\n  }\n\n  _hide() {\n    this._element.classList.remove('is-active');\n    this._isActive = false;\n  }\n}\n\nclass Zone {\n  constructor(zone) {\n    this._addBlock = null;\n    this._element = zone;\n\n    this._createAddBlock();\n    this._enableDragNDrop();\n  }\n\n  _createAddBlock() {\n    const zoneName = this._element.getAttribute('data-zone');\n    const zoneTypes = JSON.parse(this._element.getAttribute('data-zone-block-types'));\n\n    let blockWrapper = document.createElement('div');\n    blockWrapper.classList.add('add-block');\n\n    let button = document.createElement('button');\n    button.innerHTML = 'Add block';\n    button.addEventListener('click', this._showAddBlockList.bind(this), false);\n    blockWrapper.appendChild(button);\n\n    let zonesList = document.createElement('ul');\n    zonesList.classList.add('add-block-items', 'clearfix');\n    blockWrapper.appendChild(zonesList)\n\n    for(let type of zoneTypes) {\n      let listItem = document.createElement('li');\n      listItem.addEventListener('click', () => this._addNewBlock(zoneName, type), false);\n\n      let listImg = document.createElement('img');\n      listImg.classList.add('icon');\n      listImg.setAttribute('src', `${window.location.origin}/img/add-block-${type.type}.png`);\n      listItem.appendChild(listImg);\n\n      let listName = document.createElement('span');\n      listName.classList.add('title');\n      listName.innerHTML = type.name;\n      listItem.appendChild(listName);\n\n      zonesList.appendChild(listItem);\n    }\n\n    this._element.appendChild(blockWrapper);\n    this._addBlock = blockWrapper;\n  }\n\n  _showAddBlockList() {\n    this._addBlock.classList.add('is-active');\n  }\n\n  _addNewBlock(zoneName, type) {\n    this._addBlock.classList.remove('is-active');\n\n    API.getBlock(type.type, (block) => {\n      let newBlock = $(block)[0];\n\n      $(`[data-zone=\"${zoneName}\"]`).find('.add-block').before(newBlock);\n      new Block(newBlock);\n\n      window.statusBar.showMessage(`You have just added ${type.name} block`);\n    });\n  }\n\n  _enableDragNDrop() {\n    $(this._element).sortable({\n      connectWith: '[data-zone]',\n      items: '.item',\n      handle: '.move-block',\n      cancel: '',\n      helper: 'clone',\n      appendTo: 'body',\n      zIndex: 10000,\n      delay: 100,\n      placeholder: 'placeholder',\n      activate: (e, ui) => {},\n      beforeStop: (e, ui) => {},\n      change: (e, ui) => {},\n      create: (e, ui) => {},\n      deactivate: (e, ui) => {},\n      out: (e, ui) => {},\n      over: (e, ui) => {},\n      receive: (e, ui) => {\n        let type = $(ui.item).data('blockType');\n        let types = $(e.target).data('zoneBlockTypes').map((obj) => obj.type);\n\n        if (types.indexOf(type) === -1) {\n          $(ui.sender).sortable('cancel');\n        }\n\n        $('[data-zone]').sortable('enable');\n      },\n      remove: (e, ui) => {},\n      sort: (e, ui) => {},\n      start: (e, ui) => {\n        let type = $(ui.item).data('blockType');\n        let zones = $('[data-zone]');\n\n        for(let i = 0; i < zones.length; i++) {\n          let types = $(zones[i]).data('zoneBlockTypes').map((obj) => obj.type);\n\n          if (types.indexOf(type) === -1) {\n            $(zones[i]).sortable('disable');\n          }\n        }\n      },\n      stop: (e, ui) => {},\n      update: (e, ui) => {}\n    });\n  }\n}\n\nclass Block {\n  constructor(block) {\n    this._addBlock = null;\n    this._element = block;\n    this._blockType = block.dataset.blockType;\n    this._childBlockType = null;\n    \n    this._createControls();\n    this._fixPlaceholders();\n\n    if ($(block).find('[data-key=\"blocks\"]').length != 0) {\n      this._childBlockType = $(block).find('[data-key=\"blocks\"]')[0].dataset.childBlockType;\n\n      this._createMicroBlockControls();\n      this._enableMicroBlockDragNDrop();\n      this._createAddBlock();\n    }\n  }\n\n  _createControls() {\n    let blockWrapper = document.createElement('div');\n    blockWrapper.classList.add('editable-block');\n\n    let blockActionsWrapper = document.createElement('div');\n    blockActionsWrapper.classList.add('block-actions');\n    blockWrapper.appendChild(blockActionsWrapper);\n\n    let itemPlaceholder = document.createElement('div');\n    itemPlaceholder.classList.add('item-placeholder');\n    itemPlaceholder.innerHTML = this._element.innerHTML;\n    blockWrapper.appendChild(itemPlaceholder);\n\n    if (JSON.parse(this._element.getAttribute('data-is-draggable')) === true) {\n      let moveButton = document.createElement('button');\n      moveButton.classList.add('move', 'move-block');\n      blockActionsWrapper.appendChild(moveButton);\n    }\n\n    if (JSON.parse(this._element.getAttribute('data-is-editable')) === true) {\n      let editButton = document.createElement('button');\n      editButton.classList.add('edit');\n      editButton.innerHTML = 'Edit';\n      editButton.addEventListener('click', this.edit.bind(this), false);\n      blockActionsWrapper.appendChild(editButton);\n    }\n\n    if (JSON.parse(this._element.getAttribute('data-is-deletable')) === true) {\n      let deleteButton = document.createElement('button');\n      deleteButton.classList.add('delete');\n      deleteButton.innerHTML = 'Delete';\n      deleteButton.addEventListener('click', this.delete.bind(this), false);\n      blockActionsWrapper.appendChild(deleteButton);\n    }\n\n    if (JSON.parse(this._element.getAttribute('data-is-editable')) === true) {\n      let saveButton = document.createElement('button');\n      saveButton.classList.add('save');\n      saveButton.innerHTML = 'Save';\n      saveButton.addEventListener('click', this.save.bind(this), false);\n      blockActionsWrapper.appendChild(saveButton);\n    }\n\n    while (this._element.firstChild) {\n      this._element.removeChild(this._element.firstChild);\n    }\n     \n    this._element.appendChild(blockWrapper);\n  }\n\n  _fixPlaceholders() {\n    let placeholders = $(this._element).find('[data-placeholder]');\n      for(let i = 0; i < placeholders.length; i++) {\n        let el = $(placeholders[i])[0];\n        let placeholder = el.dataset.placeholder;\n        if(el.innerHTML.indexOf('{{') > -1) {\n          $(el).html(placeholder);\n        }\n      }\n  }\n\n  _createMicroBlockControls() {\n    $('[data-key=\"blocks\"] > div, [data-key=\"blocks\"] > li').addClass('editable-micro-block');\n\n    let blockActionsWrapper = document.createElement('div');\n    blockActionsWrapper.classList.add('block-actions');\n\n    let moveButton = document.createElement('button');\n    moveButton.classList.add('move', 'move-micro-block');\n    blockActionsWrapper.appendChild(moveButton);\n\n    let deleteButton = document.createElement('button');\n    deleteButton.classList.add('delete');\n    deleteButton.innerHTML = 'Delete';\n    $(deleteButton).on('click', this.deleteMicroBlock.bind(this));\n    blockActionsWrapper.appendChild(deleteButton);\n\n    $('[data-key=\"blocks\"] > div, [data-key=\"blocks\"] > li').remove('.block-actions');\n    $('[data-key=\"blocks\"] > div, [data-key=\"blocks\"] > li').append(blockActionsWrapper);\n  }\n\n  _enableMicroBlockDragNDrop() {\n    $('[data-key=\"blocks\"]').sortable({\n      // connectWith: '',\n      items: '> div, > li',\n      handle: '.move-micro-block',\n      cancel: '',\n      // helper: 'clone',\n      appendTo: 'body',\n      zIndex: 10000,\n      delay: 100,\n      placeholder: 'placeholder',\n      activate: (e, ui) => {},\n      beforeStop: (e, ui) => {},\n      change: (e, ui) => {},\n      create: (e, ui) => {},\n      deactivate: (e, ui) => {},\n      out: (e, ui) => {},\n      over: (e, ui) => {},\n      receive: (e, ui) => {},\n      remove: (e, ui) => {},\n      sort: (e, ui) => {},\n      start: (e, ui) => {},\n      stop: (e, ui) => {},\n      update: (e, ui) => {}\n    });\n  }\n\n  _createAddBlock() {\n    let blockWrapper = document.createElement('div');\n    blockWrapper.classList.add('add-micro-block');\n\n    let button = document.createElement('button');\n    button.innerHTML = 'Add Micro block';\n    button.addEventListener('click', this._addMicroBlock.bind(this), false);\n    blockWrapper.appendChild(button);\n    $(this._element).find('.editable-block').append(blockWrapper);\n  }\n\n  _addMicroBlock() {\n    API.getBlock(this._childBlockType, (block) => {\n      $(this._element).find('[data-key=\"blocks\"]').append(block);\n      this._createMicroBlockControls();\n      this._fixPlaceholders();\n\n      //TODO: refactor edit function\n      let editableElements = this._element.querySelectorAll('[data-key]');\n      for (let i = 0; i < editableElements.length; i++) {\n        const key = editableElements[i].getAttribute('data-key');\n        if(['skill', 'blocks'].indexOf(key) === -1) {\n          editableElements[i].setAttribute('contenteditable', true);\n        }\n      }\n    });\n  }\n\n  _toggleEditing() {\n    this._element.querySelector('.editable-block').classList.toggle('is-editing');\n    this._isEditing = !this._isEditing;\n  }\n\n  edit() {\n    let editableElements = this._element.querySelectorAll('[data-key]');\n    for (let i = 0; i < editableElements.length; i++) {\n      const key = editableElements[i].getAttribute('data-key');\n      if(['blocks'].indexOf(key) === -1) {\n        editableElements[i].setAttribute('contenteditable', true);\n      }\n    }\n\n    // console.log($(this._element).find('.skills'))\n   \n\n    let sliders = $(this._element).find('.skills'); //.after(slider);\n    for(let i = 0; i < sliders.length; i++) {\n      // console.log($(sliders[i]).parent().find('.slider').length)\n      if($(sliders[i]).parent().find('.slider').length === 0) {\n        let slider = document.createElement('div');\n        slider.classList.add('slider');\n        $(slider).slider({\n          range: 'max',\n          min: 0,\n          max: 10\n        });\n        $(sliders[i]).after(slider);\n      }\n    }\n\n    this._toggleEditing();\n  }\n\n  save() {\n    let editableElements = this._element.querySelectorAll('[data-key]');\n\n    //Data saving\n    let counter = 0;\n    let data = {};\n    data['blockId'] = this._element.dataset.blockId;\n    data['blockType'] = this._element.dataset.blockType;\n    data['fields'] = {};\n    for (let i = 0; i < editableElements.length; i++) {\n      if(['blocks'].indexOf(editableElements[i].getAttribute('data-key')) === -1) {\n        editableElements[i].setAttribute('contenteditable', false);\n      }\n\n      if(editableElements[i].getAttribute('data-key') !== 'blocks') {\n        if(data['fields']['blocks'] !== undefined) {  \n          const keysCount = $(this._element).find('[data-key=\"blocks\"]').find('[data-key]');\n          const sameKeysCount = $(this._element).find('[data-key=\"blocks\"]').find('[data-key=\"' + keysCount[0].getAttribute('data-key') + '\"]')\n          // console.log(keysCount.length, sameKeysCount.length);\n          let obj = {};\n          for(let j = 0; j < (keysCount.length / sameKeysCount.length); j++) {\n            obj[editableElements[i + j].getAttribute('data-key')] = editableElements[i + j].innerHTML;  \n            // console.log(i, j);\n          }\n\n          i+= keysCount.length / sameKeysCount.length - 1;\n          // console.log(obj);\n          data['fields']['blocks'].push(obj);\n        }\n        else {\n          data['fields'][editableElements[i].getAttribute('data-key')] = editableElements[i].innerHTML;  \n        }\n      }\n      else {\n        data['fields']['blocks'] = [];\n      }\n    }\n\n    console.log(data);\n    API.saveBlock(data, () => {\n\n    });\n\n    this._toggleEditing();\n  }\n\n  delete() {\n    this._element.parentNode.removeChild(this._element);\n    \n    window.statusBar.showMessage('You have just deleted block');\n  }\n\n  deleteMicroBlock(e) {\n    $(e.target).parent().parent().detach();\n  }\n};\n\nconst API = {\n  getCv: (cb) => {\n    $.ajax({\n      url: window.templateUrl,\n      success: (data) => {\n        cb(data);\n      },\n      complete: () => {},\n      error: () => {}\n    });\n  },\n\n  getBlock: (type, cb) => {\n    $.ajax({\n      url: `${location.protocol}//${location.host}/api/block/${window.templateId}/${type}`,\n      success: (data) => {\n        let block = decodeURIComponent(JSON.parse(data).data).replace(/\\+/g, ' ');\n\n        cb(block);\n      },\n      complete: () => {},\n      error: () => {}\n    });\n  },\n\n  saveBlock: (block, cb) => {\n    block.cvId = cvId;\n    \n    $.ajax({\n      url: `${location.protocol}//${location.host}/api/block/`,\n      method: 'POST',\n      data: block,\n      success: (data) => {\n        cb(true);\n      },\n      complete: () => {},\n      error: () => {}\n    });\n  }\n}"]}